##e3-shop项目介绍
---
    该项目是由Java开发，Maven构建的分布式电商项目，使用了SOA面向服务式的开发思想进行开发，主要分为web服务提供模块和的web服务的接受模块，符合现代的开发要求。
    主要完成的模块：管理员后台商品的查询和添加，修改，下架，商品类别的设置；商城门户内容的定制，轮播图的定制；商品索引库的导入和同步，商品关键词高亮显示；商品页面的静态化处理；商品添加后通过消息队列将商品同步至索引库中；轮播图的缓存和商品的缓存；缓存同步处理等
## 项目选型
---
由于电商项目需要更快捷的反应以及开发速度，我采用了ssm框架为主体进行开发，springmvc比struts2更方便快捷，mybatis比hibernate更适合单表查询，更加地轻量级，在整个开发中，使用了10余台tomcat服务器搭建分布式的环境，在linux系统中搭建了zookeeper注册中心，solr搜索引擎以及activemq消息队列以及redis缓存服务器
## 项目的主要技术
### 1 Dubbo&Zookeeper&Maven

    使用Maven将项目拆分成“服务提供者”和“服务消费者”两大块，服务提供者即Provider，服务消费者即Consumer，两者之间由部署在云服务器中的注册中心Zookeeper负责注册，并且使用阿里巴巴出品的Dubbo作为服务中间，使得提供者可以发布服务到Zookeeper中，消费者可以从Zookeeper中获得服务，可以是Dubbo在整个SOA架构中起到了不可或缺的作用

### 2 SpringMVC

    控制层使用了当前流行的MVC（模型-视图-控制器）框架SpringMVC，作为前端请求的切入口，用以拦截所有的权限,使用SpringMVC需要手动配置前端控制器DispatherServlet，和指定springmvc.xml配置文件,由于SpringMVC可以和Spring无缝整合，所以springmvc.xml可以当做Spring的配置文件，用于配置bean

### 3 Spring

    项目中使用到了Spring作为容器，用以管理类和注册类。Spring的主要用途是Ioc控制反转和DI依赖注入，这也是Spring的精髓所在，通过Spring可以方便快捷地获得类和管理类，并且可通过Spring进行事务的管理，对业务层的方法开启事务，防止数据库数据的错误

### 4 MyBatis

    持久层使用了当前流行的框架MyBatis，该框架是目前和hibernate齐名的持久层框架，但是它和hibernate不同的是，MyBatis是半自动的ORM框架，而不是hibernate那样全自动ORM，这符合电商项目中针对单表查询的“快速、轻量 “的特点，使用MyBatis，我们可以自己写sql语句去获得所需要的字段，十分灵活和方便

### 5 MyBatis逆向工程

    由于自己写mapper配置文件和mapper接口十分不便，所以针对单表查询时，我使用了MyBatis的逆向工程，生成了所需的mapper.xml和实体类以及pojo表，加速开发

### 6 PageHelper分页插件

    PageHelper是MyBatis官方提供的一款快捷方便的分页插件，用以处理后台的分页逻辑

### 7 Redis数据库

    Redis是目前流行的nosql非关系型数据库，由于redis的数据是存储在内存中的，所以可以实现高速读写，这是其他数据库无法比拟的，且redis的数据存储形式是键值对 ，十分地便于读取，所以在本项目中使用Redis搭建了缓冲服务器，Redis部署在云服务器中，在请求数据库之前先请求Redis，查看是否有相关的数据，如果没有的话才查询数据库，并且在查询到数据库后将数据存储在Redis中，设置相应的过期时间，在高并发环境下可以大大地减轻数据库的压力。但由于添加商品后，用户可能还是查询到旧缓存，所以这涉及到缓存同步问题，最简单的做法是再添加商品后删去Redis服务武器中的对应缓存，让下次访问时查询数据库即可得到最新的商品

### 8 Solr搜索引擎

    由于在商品查询时，需要根据关键字查询商品并且回显出来，并将关键字标红，我使用了Solr这款搜索引擎。Solr是由Apache出品的一款搜索引擎，使用Solr和直接查询数据库的不同是，Solr中的数据是建立了索引的，而数据库中的数据并没有相应的索引，所以使用Solr可以大大地减少搜索数据的时间和减轻数据库的压力，使用Solr需要部署在服务器中。

### 9 ActiveMQ消息队列

    在建立商品索引时我发现，每次添加新的商品，都需要重新手动建立索引，很不符合自动化的思想，所以在项目中使用了ActiveMQ，ActiveMQ是apache出品的当前最流行的消息队列产品，其底层消息传输基于NIO非阻塞式IO流，所以性能强劲。ActiveMQ相当于消息的中介，它有两种使用模式，一种是队列模式，即P2P点多点的模式，当提供者发布消息时，消费者消费了这个消息后，消息消失，第二种模式也是本项目中使用到的模式，发布订阅模式，提供者发布消息后，可以让多个消费者去获取这个消息，消息并不会消失，符合开发的特点。在开发中的应用是，当商品添加时即发布消息，消息中存储着商品的ID，activemq监听器监听到消息后通过消息中的ID查询商品并写入索引库中，完成索引库的同步。

### 10 FreeMarker模板引擎

    FreeMarker是一款模板引擎，它可以将模板和数据混合在一起，达到我们想要的效果。本项目中主要使用了FreeMarker作为商品页面静态化工具，当管理员添加新商品时，通过消息队列将商品的ID传输给监听器，由监听器调用FreeMarker完成商品数据和模板的渲染，达到静态化的效果，当用户访问该商品时，服务器几乎无需渲染页面了，大大减少了服务器的压力

